# /bin/bash
rm -f input.txt
touch input.txt
chmod u+r input.txt

rm -f out
touch out

# test1
# subject test
input1="date | value
2011-01-03 | 3
2011-01-03 | 2
2011-01-03 | 1
2011-01-03 | 1.2
2011-01-09 | 1
2012-01-11 | -1
2001-42-42 
2012-01-11 | 1
2012-01-11 | 2147483648"

echo "=====================================================================" >> out
echo "\033[0;31m test 1 \033[0;m" >> out
echo "subject test" >> out
echo "=====================================================================" >> out
echo "$input1" >> out
echo "---------------------------------------------------------------------" >> out
echo "$input1" > input.txt
./btc input.txt >> out 2>&1
echo >>out

# test2
# date error
input2="date | value
2011-01-33 | 2
201101-31 | 2
2011-0131 | 2
2011-01--31 | 2
2011-01--31-- | 2
-2011-01--31 | 2
-201101--31 | 2
-2011-01-31- | 2
2011-13-03 | 1
2011--1-03 | 1.2
2-0-1-1--1-0-3 | 1.2
+2011-1-03 | 1
a012-01-11 | 0                
2p01-42-42 | 999                       
20k2-01-11 | 1
asdf-01-11 | 1"

echo "=====================================================================" >> out
echo "\033[0;31m test 2 \033[0;m" >> out
echo "date error" >> out
echo "=====================================================================" >> out
echo "$input2" >> out
echo "---------------------------------------------------------------------" >> out
echo "$input2" > input.txt
./btc input.txt >> out 2>&1
echo >>out

# test3
# val error
input3="date | value
2011-01-13 | +-999
2011-13-03 | ---
2011-11-03 | !91
2011-01-19 | a       
2012-01-11 | a9      
2011-12-12 | ........ 
2012-01-11 | --1
2010-01-11 | ++1001
2012-01-11 | +1001
2012-01-11 | 1001
2012-01-11 | -1000
2012-01-11 |           
2012-01-11 | -100
2012-01-11 | --100"

echo "=====================================================================" >> out
echo "\033[0;31m test 3 \033[0;m" >> out
echo "val error" >> out
echo "=====================================================================" >> out
echo "$input3" >> out
echo "---------------------------------------------------------------------" >> out
echo "$input3" > input.txt
./btc input.txt >> out 2>&1
echo >>out

# test3
# format error
input4="date | value
                     
        | ---
| | |
1-11 | 100|"

echo "=====================================================================" >> out
echo "\033[0;31m test 3 \033[0;m" >> out
echo "format error" >> out
echo "=====================================================================" >> out
echo "$input4" >> out
echo "---------------------------------------------------------------------" >> out
echo "$input4" > input.txt
./btc input.txt >> out 2>&1
echo >>out

# test4
# normal test
input4="date | value
2009-01-02 | 1
2009-01-01 | 1
2022-03-29 | 1 
2022-03-30 | 1
2010-10-13 | 1
2010.01-10.0-15 | 1
2010!0-10-15 | 0.1
2010.0-10-15 | 1
2010-100-15 | 0.1
2010-10-15 | 0.1!
2300-10-15 |  1
2300-10-15 |  2"

echo "=====================================================================" >> out
echo "\033[0;31m test 4 \033[0;m" >> out
echo "normal test" >> out
echo "=====================================================================" >> out
echo "$input4" >> out
echo "---------------------------------------------------------------------" >> out
echo "$input4" > input.txt
./btc input.txt >> out 2>&1
echo >>out